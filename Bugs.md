## Баг-репорт для API

### Критические баги (High)

#### BUG-1: Неправильный формат ответа при создании объявления
**Приоритет:** High  
**Статус:** Открыт  
**Серьезность:** Критическая

**Описание:** 
При успешном создании объявления через POST /api/1/item возвращается не объект с полями объявления, как указано в документации, а строка с сообщением.

**Шаги воспроизведения:**
1. Отправить POST запрос на /api/1/item с валидными данными
2. Проверить формат ответа

**Ожидаемый результат (согласно документации):**
```json
{
  "id": "<string>",
  "sellerId": "<integer>", 
  "name": "<string>",
  "price": "<integer>",
  "statistics": {
    "likes": "<integer>",
    "viewCount": "<integer>",
    "contacts": "<integer>"
  },
  "createdAt": "<string>"
}
```

**Фактический результат:**
```json
{
  "status": "Сохранили объявление - 5c81737a-6af3-4622-970f-0ec9eba88256"
}
```

**Доказательство из тестов:**
```
test_avito_api.py:63: AssertionError: Response should contain id field
assert 'id' in {'status': 'Сохранили объявление - 5c81737a-6af3-4622-970f-0ec9eba88256'}
```

**Влияние:** 
- Невозможно получить ID созданного объявления для последующих операций
- Клиенты не могут парсить ответ стандартным способом
- Нарушение контракта API

---

#### BUG-2: Неправильные HTTP статус-коды для несуществующих ресурсов
**Приоритет:** High  
**Статус:** Открыт  
**Серьезность:** Критическая

**Описание:** 
Для несуществующих ресурсов возвращается статус 400 вместо корректного 404, что нарушает REST стандарты.

**Затронутые эндпоинты:**
- GET /api/1/item/{nonexistent_id} → возвращает 400 вместо 404
- GET /api/1/statistic/{nonexistent_id} → возвращает 400 вместо 404  
- DELETE /api/2/item/{nonexistent_id} → возвращает 400 вместо 404

**Шаги воспроизведения:**
1. Отправить запрос к несуществующему ресурсу
2. Проверить статус код ответа

**Ожидаемый результат:** HTTP 404 Not Found

**Фактический результат:** HTTP 400 Bad Request

**Доказательство из тестов:**
```
test_get_nonexistent_item: Expected 404, got 400
test_get_nonexistent_statistics: Expected 404, got 400  
test_delete_nonexistent_item: Expected 404, got 400
```

**Влияние:**
- Нарушение REST стандартов
- Клиенты не могут корректно обрабатывать случаи "не найдено"
- Сложность отладки и обработки ошибок

---

#### BUG-3: Отсутствие поля ID в структурированном виде
**Приоритет:** High  
**Статус:** Открыт  
**Серьезность:** Высокая

**Описание:** 
В ответе на создание объявления отсутствует поле "id" в структурированном JSON формате, что делает невозможным выполнение последующих операций с созданным объявлением.

**Шаги воспроизведения:**
1. Создать объявление через POST /api/1/item
2. Попытаться использовать ID для последующих операций (получение, удаление, статистика)

**Ожидаемый результат:** ID доступен как поле JSON объекта

**Фактический результат:** ID приходится извлекать из текстового сообщения с помощью регулярных выражений

**Доказательство из тестов:**
```
KeyError: 'id' в тестах:
- test_get_item_by_id_success
- test_get_statistics_success  
- test_delete_item_success
- test_full_cycle_integration
```

**Влияние:**
- Невозможность выполнять цепочки операций с объявлениями
- Усложнение клиентского кода
- Хрупкость интеграций

---

### Прошедшие тесты (Функциональность работает корректно)

 **Успешные сценарии:**
- `test_create_item_invalid_seller_id` - Создание с невалидным sellerID (возвращает 400)
- `test_create_item_missing_required_fields` - Создание без обязательных полей (возвращает 400) 
- `test_get_seller_items_success` - Получение объявлений существующего продавца
- `test_get_nonexistent_seller_items` - Получение объявлений несуществующего продавца
- `test_multiple_items_same_seller` - Создание нескольких объявлений одного продавца

---

### Рекомендации по исправлению

1. **BUG-1:** Вернуть структурированный JSON ответ согласно документации
2. **BUG-2:** Исправить статус-коды с 400 на 404 для несуществующих ресурсов  
3. **BUG-3:** Добавить поле "id" в ответ при создании объявления
```